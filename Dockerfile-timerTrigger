ARG NODE_VERSION=18
FROM node:${NODE_VERSION}-alpine
RUN npm install -g npm@latest
RUN npm install -g azure-functions-core-tools@4 --unsafe-perm true

COPY . /code
WORKDIR /code/timerTrigger
EXPOSE 3000
RUN npm install
RUN npm run build --if-present
RUN npm run test --if-present
ENTRYPOINT npm run start
